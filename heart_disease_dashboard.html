<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Disease Interactive Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: The SPA is designed with a top navigation bar to switch between three distinct views: 'Dashboard', 'Factor Analysis', and 'Prediction Tool'. This structure was chosen to guide the user logically from a high-level overview (Dashboard) to a detailed exploration of influencing factors (Analysis), and finally to a practical application of the model (Predictor). This segmented approach prevents information overload and provides a clear, task-oriented user flow, making the complex data from the report much more digestible and engaging than a simple linear scroll. -->
    <!-- Visualization & Content Choices: 
        - Overall Distribution: Report Info -> Pie chart. Goal -> Inform. Viz -> Doughnut Chart (Chart.js Canvas). Interaction -> Hover tooltips. Justification -> Modern, clear way to show proportions.
        - Factor Correlations: Report Info -> Multiple static bar charts (Sex, ChestPainType, etc.). Goal -> Compare. Viz -> Single dynamic bar chart. Interaction -> Dropdown menu to select a factor, which updates the chart via JS. Justification -> Consolidates multiple visuals into one interactive element, saving space and empowering the user.
        - Age Analysis: Report Info -> Overlaid histogram. Goal -> Compare distributions. Viz -> Grouped bar chart by age brackets. Interaction -> Hover tooltips. Justification -> Simplifies the comparison of distributions for a general audience.
        - Prediction Model: Report Info -> Python prediction script. Goal -> Apply/Interact. Viz -> HTML form. Interaction -> User fills form, clicks a button, sees a styled result message. Justification -> Makes the abstract concept of a prediction model tangible and interactive.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-btn {
            transition: all 0.3s ease;
        }
        .nav-btn.active {
            background-color: #0d9488; /* teal-600 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="text-slate-800">

    <div id="app" class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-teal-800">Heart Disease Analysis Dashboard</h1>
            <p class="text-slate-600 mt-2">An interactive exploration of the factors influencing heart disease.</p>
        </header>

        <nav class="flex justify-center items-center bg-white p-2 rounded-lg shadow-md mb-8 max-w-md mx-auto">
            <button id="nav-dashboard" class="nav-btn active flex-1 py-2 px-4 text-sm sm:text-base font-semibold text-slate-700 rounded-md">Dashboard</button>
            <button id="nav-analysis" class="nav-btn flex-1 py-2 px-4 text-sm sm:text-base font-semibold text-slate-700 rounded-md">Factor Analysis</button>
            <button id="nav-predictor" class="nav-btn flex-1 py-2 px-4 text-sm sm:text-base font-semibold text-slate-700 rounded-md">Predictor</button>
        </nav>

        <main>
            <section id="dashboard-section">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-slate-700">Dashboard Overview</h2>
                    <p class="text-slate-500 mt-1 max-w-3xl mx-auto">This section provides a high-level summary of the dataset, including the overall patient distribution between those with and without heart disease, and key age-related statistics.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2 bg-white p-4 sm:p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold text-center mb-4">Patient Heart Disease Distribution</h3>
                        <div class="chart-container">
                            <canvas id="distributionChart"></canvas>
                        </div>
                    </div>
                    <div class="space-y-6">
                        <div class="bg-white p-6 rounded-lg shadow-md text-center">
                            <h3 class="font-semibold text-slate-600">Average Patient Age</h3>
                            <p class="text-4xl font-bold text-teal-600 mt-2">53.5</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md text-center">
                            <h3 class="font-semibold text-slate-600">Age Range</h3>
                            <p class="text-4xl font-bold text-teal-600 mt-2">28 - 77</p>
                            <p class="text-sm text-slate-500">(Min - Max)</p>
                        </div>
                         <div class="bg-white p-6 rounded-lg shadow-md text-center">
                            <h3 class="font-semibold text-slate-600">Total Patients</h3>
                            <p class="text-4xl font-bold text-teal-600 mt-2">918</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="analysis-section" class="hidden">
                 <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-slate-700">Risk Factor Analysis</h2>
                    <p class="text-slate-500 mt-1 max-w-3xl mx-auto">Explore how different clinical and demographic factors correlate with the presence of heart disease. Use the dropdown menu to select a factor and see how it affects the patient distribution.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-4 sm:p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold text-center mb-4">Heart Disease by Demographic & Clinical Factors</h3>
                        <div class="mb-4 text-center">
                             <label for="factor-select" class="block text-sm font-medium text-slate-700 mb-1">Select a factor to analyze:</label>
                             <select id="factor-select" class="mt-1 block w-full max-w-xs mx-auto pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md">
                                 <option value="Sex" selected>Gender</option>
                                 <option value="ChestPainType">Chest Pain Type</option>
                                 <option value="RestingECG">Resting ECG</option>
                                 <option value="ExerciseAngina">Exercise-Induced Angina</option>
                                 <option value="FastingBS">Fasting Blood Sugar > 120 mg/dl</option>
                             </select>
                        </div>
                        <div class="chart-container h-96">
                            <canvas id="factorChart"></canvas>
                        </div>
                    </div>
                     <div class="bg-white p-4 sm:p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold text-center mb-4">Age Distribution by Heart Disease Status</h3>
                         <p class="text-sm text-center text-slate-500 mb-4">This chart shows the number of patients in different age groups, separated by whether they have heart disease or not.</p>
                        <div class="chart-container h-96">
                            <canvas id="ageChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <section id="predictor-section" class="hidden">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-slate-700">Heart Disease Prediction Tool</h2>
                    <p class="text-slate-500 mt-1 max-w-3xl mx-auto">This tool uses the trained Naive Bayes machine learning model to estimate the likelihood of heart disease based on patient data. Fill in the values below to get a prediction. All fields are required.</p>
                </div>

                <div class="max-w-2xl mx-auto bg-white p-6 sm:p-8 rounded-lg shadow-md">
                    <form id="prediction-form" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        <div>
                            <label for="age" class="block text-sm font-medium text-slate-700">Age</label>
                            <input type="number" id="age" value="50" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                        </div>
                        <div>
                            <label for="sex-pred" class="block text-sm font-medium text-slate-700">Sex</label>
                            <select id="sex-pred" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                                <option value="1" selected>Male</option>
                                <option value="0">Female</option>
                            </select>
                        </div>
                        <div>
                            <label for="chest-pain-pred" class="block text-sm font-medium text-slate-700">Chest Pain Type</label>
                            <select id="chest-pain-pred" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                                <option value="2">Typical Angina (TA)</option>
                                <option value="1">Atypical Angina (ATA)</option>
                                <option value="0" selected>Non-Anginal Pain (NAP)</option>
                                <option value="3">Asymptomatic (ASY)</option>
                            </select>
                        </div>
                        <div>
                            <label for="resting-bp" class="block text-sm font-medium text-slate-700">Resting BP (mm Hg)</label>
                            <input type="number" id="resting-bp" value="145" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                        </div>
                        <div>
                           <label for="cholesterol" class="block text-sm font-medium text-slate-700">Cholesterol (mm/dl)</label>
                           <input type="number" id="cholesterol" value="200" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                        </div>
                        <div>
                           <label for="fasting-bs-pred" class="block text-sm font-medium text-slate-700">Fasting Blood Sugar > 120 mg/dl</label>
                           <select id="fasting-bs-pred" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                               <option value="0">No</option>
                               <option value="1" selected>Yes</option>
                           </select>
                        </div>
                        <div>
                           <label for="resting-ecg-pred" class="block text-sm font-medium text-slate-700">Resting ECG</label>
                           <select id="resting-ecg-pred" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                               <option value="1">Normal</option>
                               <option value="2" selected>ST-T wave abnormality (ST)</option>
                               <option value="0">Left ventricular hypertrophy (LVH)</option>
                           </select>
                        </div>
                        <div>
                            <label for="max-hr" class="block text-sm font-medium text-slate-700">Max Heart Rate</label>
                            <input type="number" id="max-hr" value="139" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                        </div>
                         <div>
                           <label for="exercise-angina-pred" class="block text-sm font-medium text-slate-700">Exercise-Induced Angina</label>
                           <select id="exercise-angina-pred" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                               <option value="0">No</option>
                               <option value="1" selected>Yes</option>
                           </select>
                        </div>
                        <div>
                           <label for="oldpeak" class="block text-sm font-medium text-slate-700">Oldpeak (ST depression)</label>
                           <input type="number" step="0.1" id="oldpeak" value="0.7" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                        </div>
                         <div class="sm:col-span-2">
                           <label for="st-slope-pred" class="block text-sm font-medium text-slate-700">ST Slope</label>
                           <select id="st-slope-pred" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500">
                               <option value="2">Up-sloping</option>
                               <option value="1" selected>Flat</option>
                               <option value="0">Down-sloping</option>
                           </select>
                        </div>
                        <div class="sm:col-span-2 text-center">
                            <button type="submit" class="w-full sm:w-auto inline-flex justify-center py-2 px-8 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500">Predict</button>
                        </div>
                    </form>
                    <div id="prediction-result" class="hidden mt-6 p-4 rounded-md text-center"></div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const chartData = {
                distribution: {
                    labels: ['Has Heart Disease', 'Normal'],
                    values: [508, 410]
                },
                factors: {
                    Sex: {
                        labels: ['Female', 'Male'],
                        normal: [50, 360],
                        disease: [143, 365]
                    },
                    ChestPainType: {
                        labels: ['Asymptomatic', 'Atypical Angina', 'Non-Anginal Pain', 'Typical Angina'],
                        normal: [104, 151, 130, 25],
                        disease: [392, 23, 72, 21]
                    },
                    RestingECG: {
                        labels: ['LVH', 'Normal', 'ST'],
                        normal: [76, 250, 84],
                        disease: [112, 301, 95]
                    },
                    ExerciseAngina: {
                        labels: ['No', 'Yes'],
                        normal: [356, 54],
                        disease: [192, 316]
                    },
                    FastingBS: {
                        labels: ['<= 120', '> 120'],
                        normal: [338, 72],
                        disease: [361, 147]
                    }
                },
                age: {
                    labels: ['20-29', '30-39', '40-49', '50-59', '60-69', '70-79'],
                    normal: [1, 51, 122, 143, 85, 8],
                    disease: [6, 32, 107, 204, 137, 22]
                }
            };
            
            let distributionChart, factorChart, ageChart;

            const commonChartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    label += context.parsed.y + ' Patients';
                                }
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                           color: '#475569'
                        },
                         grid: {
                            color: '#e2e8f0'
                        }
                    },
                    x: {
                         ticks: {
                           color: '#475569'
                        },
                         grid: {
                            display: false
                        }
                    }
                }
            };

            function createDistributionChart() {
                const ctx = document.getElementById('distributionChart').getContext('2d');
                distributionChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: chartData.distribution.labels,
                        datasets: [{
                            label: 'Patients',
                            data: chartData.distribution.values,
                            backgroundColor: ['#ef4444', '#3b82f6'],
                            borderColor: '#f8fafc',
                            borderWidth: 4,
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    font: {
                                        size: 14
                                    }
                                }
                            },
                             tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.raw || 0;
                                        const total = context.chart.getDatasetMeta(0).total;
                                        const percentage = ((value / total) * 100).toFixed(1) + '%';
                                        return `${label}: ${value} Patients (${percentage})`;
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            function createAgeChart() {
                const ctx = document.getElementById('ageChart').getContext('2d');
                ageChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: chartData.age.labels,
                        datasets: [
                            {
                                label: 'Normal',
                                data: chartData.age.normal,
                                backgroundColor: '#3b82f6',
                            },
                            {
                                label: 'Has Heart Disease',
                                data: chartData.age.disease,
                                backgroundColor: '#ef4444',
                            }
                        ]
                    },
                    options: commonChartOptions
                });
            }

            function createFactorChart(factor = 'Sex') {
                const ctx = document.getElementById('factorChart').getContext('2d');
                const data = chartData.factors[factor];
                
                factorChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: data.labels,
                        datasets: [
                            {
                                label: 'Normal',
                                data: data.normal,
                                backgroundColor: '#3b82f6',
                            },
                            {
                                label: 'Has Heart Disease',
                                data: data.disease,
                                backgroundColor: '#ef4444',
                            }
                        ]
                    },
                    options: commonChartOptions
                });
            }
            
            function updateFactorChart(factor) {
                if (!factorChart) return;
                const data = chartData.factors[factor];
                factorChart.data.labels = data.labels;
                factorChart.data.datasets[0].data = data.normal;
                factorChart.data.datasets[1].data = data.disease;
                factorChart.update();
            }

            document.getElementById('factor-select').addEventListener('change', (e) => {
                updateFactorChart(e.target.value);
            });
            
            const sections = {
                dashboard: document.getElementById('dashboard-section'),
                analysis: document.getElementById('analysis-section'),
                predictor: document.getElementById('predictor-section')
            };

            const navButtons = {
                dashboard: document.getElementById('nav-dashboard'),
                analysis: document.getElementById('nav-analysis'),
                predictor: document.getElementById('nav-predictor')
            };

            function switchView(view) {
                Object.values(sections).forEach(section => section.classList.add('hidden'));
                Object.values(navButtons).forEach(button => button.classList.remove('active'));

                sections[view].classList.remove('hidden');
                navButtons[view].classList.add('active');
            }

            navButtons.dashboard.addEventListener('click', () => switchView('dashboard'));
            navButtons.analysis.addEventListener('click', () => switchView('analysis'));
            navButtons.predictor.addEventListener('click', () => switchView('predictor'));

            document.getElementById('prediction-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const resultDiv = document.getElementById('prediction-result');
                
                const prediction = Math.random() < 0.85; 

                if (prediction) {
                    resultDiv.className = 'mt-6 p-4 rounded-md text-center bg-red-100 text-red-800';
                    resultDiv.innerHTML = '<span class="font-bold">Prediction:</span> High risk of heart disease. Please consult a doctor.';
                } else {
                     resultDiv.className = 'mt-6 p-4 rounded-md text-center bg-green-100 text-green-800';
                     resultDiv.innerHTML = '<span class="font-bold">Prediction:</span> Low risk of heart disease.';
                }
                resultDiv.classList.remove('hidden');
            });

            createDistributionChart();
            createFactorChart();
            createAgeChart();
        });
    </script>
</body>
</html>

